<%= simple_form_for @settings,
                    method: :put,
                    url:    setting_path(@settings, uuid: @settings.unit_uuid) do |f| %>
  <%= f.error_notification %>

  <%= f.input :volunteer_pitch, as: :text, hint: 'HTML tags allowed' %>
  <%= f.input :meal_time, hint: 'HTML tags allowed', input_html: {size: 95} %>
  <%= f.input :reminder_subject, label: 'Reminder email subject' %>
  <%= f.input :coordinator_name %>
  <%= f.input :coordinator_email %>

  <% recipients_title = Figaro.env.recipient_title.to_s.pluralize %>
  <fieldset>
    <legend><%= recipients_title %></legend>
    <%= f.input :number_of_recipients,
                label: "Number of #{recipients_title.downcase}",
                collection: 1..Rails.configuration.max_recipients,
                as: :radio,
                input_html: {'data-orig-count'      => f.object.number_of_recipients,
                             'data-recipient-title' => Figaro.env.recipient_title.to_s.downcase} %>

    <% hidden_style = {style: 'display: none;'} %>
    <% (1..Rails.configuration.max_recipients).each do |recipient_number| %>
      <% wrapper_attrs = recipient_number > @settings.number_of_recipients ? hidden_style : {} %>
      <% wrapper_attrs.merge!('data-recipient-number' => recipient_number) %>
      <%= f.input "recipient#{recipient_number}_phone",
                  label: "#{recipient_label(recipient_number)} phone",
                  wrapper_html: wrapper_attrs %>
    <% end %>
  </fieldset>

  <div class="actions">
    <%= f.button :submit, "Save" %>
    <%= link_to 'Cancel', url_for("/#{@unit.division_abbr}/#{@unit.abbr}/#{@unit.uuid}") %>
  </div>
<% end %>
